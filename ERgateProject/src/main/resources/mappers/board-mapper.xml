<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">

	<resultMap id="boardResultSet" type="Board">
		<id column="board_no" property="boardNo"/>
		<result column="emp_id" property="empId"/>
		<result column="board_writer" property="boardWriter"/>
		<result column="board_title" property="boardTitle"/>
		<result column="board_content" property="boardContent"/>
		<result column="board_enroll_date" property="boardEnrollDate"/>
		<result column="board_modify_date" property="boardModifyDate"/>
		<result column="board_count" property="boardCount"/>
		<result column="board_status" property="boardStatus"/>
		<result column="board_file_flag" property="boardFileFlag"/>
	</resultMap>
	
	<select id="selectListCount" resultType="_int">
		select count(*)
		  from board
		 where board_status='Y'
	</select>
	
	<select id="selectList" resultMap="boardResultSet">
		select * 
		  from board
		 where board_status='Y'
		 order by board_no desc
	</select>
	
	<select id="searchListCount" parameterType="com.kh.ergate.board.model.vo.SearchCondition" resultType="_int">
		select count(*)
		  from board
		 where board_status='Y'
		    <if test="boardWriter != null">
				AND BOARD_WRITER LIKE '%' || #{boardWriter} || '%'  
			</if>
			<if test="boardTitle != null">
				AND BOARD_TITLE LIKE '%' || #{boardTitle} || '%'
			</if>
			<if test="boardContent != null">
				AND BOARD_CONTENT LIKE '%' || #{boardContent} || '%'
			</if>
	</select>
	
	<select id="searchList" parameterType="com.kh.ergate.board.model.vo.SearchCondition" resultMap="boardResultSet">
		select * 
		  from board
		 where board_status='Y'
		 	<if test="boardWriter != null">
				AND BOARD_WRITER LIKE '%' || #{boardWriter} || '%'  
			</if>
			<if test="boardTitle != null">
				AND BOARD_TITLE LIKE '%' || #{boardTitle} || '%'
			</if>
			<if test="boardContent != null">
				AND BOARD_CONTENT LIKE '%' || #{boardContent} || '%'
			</if>
		 order by board_no desc
	</select>
	<update id="increaseCount" parameterType="_int">
    	update board
    	   set board_count = board_count + 1
    	 where board_no = #{bno} and board_status = 'Y'  
    </update>
    
    <select id="selectBoard" parameterType="_int" resultMap="boardResultSet">
    	select *
    	  from board
    	 where board_no=#{bno}
    </select>
</mapper>







